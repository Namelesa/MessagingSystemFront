<div class="min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4 transition-colors duration-300">
  <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg dark:shadow-gray-900/20 p-8 w-full max-w-md transition-all duration-300">
    <div class="text-center mb-8">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white">WhisperNet</h2>
    </div>

    <div *ngIf="status === 'success'" class="text-center">
      <div class="mb-6">
        <div class="mx-auto w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 dark:from-green-400 dark:to-emerald-500 rounded-full flex items-center justify-center mb-4 shadow-lg dark:shadow-green-900/20">
          <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
        </div>
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Email Confirmed!</h1>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
          {{ message || 'Your email has been successfully verified. You can now close this page and log in at any time.' }}
        </p>
      </div>
    </div>

    <div *ngIf="status !== 'success'" class="text-center">
      <div class="mb-6">
        <div class="mx-auto w-16 h-16 bg-gradient-to-r from-red-500 to-pink-600 dark:from-red-400 dark:to-pink-500 rounded-full flex items-center justify-center mb-4 shadow-lg dark:shadow-red-900/20">
          <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </div>
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Confirmation Failed</h1>
        <p class="text-gray-600 dark:text-gray-400 mb-6">{{ message || 'There was an error confirming your email. Please try again or contact support.' }}</p>
      </div>
      <div>
        <a href="/register" class="inline-block py-3 px-6 rounded-xl font-medium
             text-white bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700
             dark:from-red-500 dark:to-pink-600 dark:hover:from-red-600 dark:hover:to-pink-700
             shadow-md hover:shadow-lg dark:shadow-red-900/20 dark:hover:shadow-red-900/30
             transition-all duration-200 transform active:scale-95
             focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2
             focus:ring-offset-white dark:focus:ring-offset-gray-800">
          Back to Registration
        </a>
      </div>
    </div>

    <div class="mt-6 text-center">
      <p class="text-gray-500 dark:text-gray-400 text-sm">
        Need help? 
        <a href="#" class="text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 hover:underline transition-colors duration-200">Contact Support</a>
      </p>
    </div>
  </div>

  <app-toast></app-toast>
  
  <div *ngIf="showMnemonicModal"
       class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-xl relative max-h-[90vh] overflow-y-auto">
      
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4 text-center">
        Secure Your Recovery Phrase
      </h2>

      <div *ngIf="!showConfirmInputs && !showPasswordInput">
        <p class="text-gray-600 dark:text-gray-400 mb-4 text-center">
          Write down or copy these 24 words. This is the <b>only</b> way to restore your account.
        </p>

        <div class="grid grid-cols-3 gap-2 mb-6 text-sm">
          <span *ngFor="let word of mnemonic.split(' '); let i = index"
                class="px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded text-gray-800 dark:text-gray-200 font-mono select-text">
            {{ i + 1 }}. {{ word }}
          </span>
        </div>

        <div class="flex justify-end gap-3">
          <button (click)="copyMnemonic()"
                  class="py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
            ðŸ“‹ Copy All
          </button>
          <button (click)="onMnemonicSaved()"
                  class="py-2 px-4 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors">
            I have saved these words
          </button>
        </div>
      </div>

      <div *ngIf="showConfirmInputs && !showPasswordInput">
        <p class="text-gray-600 dark:text-gray-400 mb-4 text-center">
          Confirm the following words to continue:
        </p>

        <div *ngFor="let word of confirmWords; let i = index" class="mb-3">
          <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">
            Word {{ mnemonic.split(' ').indexOf(word) + 1 }}
          </label>
          <input
            type="text"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            [(ngModel)]="userConfirmInput[i]"
            placeholder="Enter word" />
        </div>

        <div class="flex justify-end gap-2 mt-4">
          <button (click)="showMnemonicModal = false"
                  class="py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
            Cancel
          </button>
          <button (click)="confirmMnemonic()"
                  class="py-2 px-4 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors">
            Confirm & Continue
          </button>
        </div>
      </div>

      <div *ngIf="showPasswordInput">
        <p class="text-gray-600 dark:text-gray-400 mb-4 text-center">
          Create a password to encrypt your backup file (optional but recommended)
        </p>

        <div class="space-y-4 mb-6">
          <div>
            <label class="block text-sm text-gray-700 dark:text-gray-300 mb-2">
              Backup Password
            </label>
            <input
              type="password"
              class="w-full p-3 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
              [class.border-red-500]="passwordError"
              [class.border-gray-300]="!passwordError"
              [class.dark:border-red-500]="passwordError"
              [class.dark:border-gray-600]="!passwordError"
              [(ngModel)]="backupPassword"
              (input)="onPasswordInput()"
              placeholder="Enter password (leave empty to skip)" />
            <p *ngIf="passwordError" class="text-red-500 dark:text-red-400 text-xs mt-1">
              {{ passwordError }}
            </p>
            <p *ngIf="!passwordError && !backupPassword" class="text-gray-500 dark:text-gray-400 text-xs mt-1">
              Min 5 chars: 1 letter, 1 number, 1 special (!, _, &#64;)
            </p>
          </div>

          <div *ngIf="backupPassword">
            <label class="block text-sm text-gray-700 dark:text-gray-300 mb-2">
              Confirm Password
            </label>
            <input
              type="password"
              class="w-full p-3 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
              [class.border-red-500]="passwordError === 'Passwords do not match'"
              [class.border-gray-300]="passwordError !== 'Passwords do not match'"
              [class.dark:border-red-500]="passwordError === 'Passwords do not match'"
              [class.dark:border-gray-600]="passwordError !== 'Passwords do not match'"
              [(ngModel)]="confirmPassword"
              (input)="onPasswordInput()"
              placeholder="Confirm password" />
          </div>
        </div>

        <div class="flex justify-end gap-2">
          <button (click)="skipPassword()"
                  class="py-2 px-4 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
            Skip Password
          </button>
          <button (click)="createBackup()"
                  class="py-2 px-4 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors">
            Create Backup
          </button>
        </div>

        <p class="text-xs text-gray-500 dark:text-gray-400 mt-4 text-center">
          ðŸ’¡ You can skip the password, but your backup file will be unencrypted
        </p>
      </div>

    </div>
  </div>
</div>