<app-chat-layout
  [selectedChat]="selectedChat"
  [selectedChatImage]="selectedChatImage"
  [groupId]="selectedGroupId"
  (headerClick)="onHeaderClick()"
>
  <app-group-chat-list
    chat-sidebar
    [accessToken]="accessToken || ''"
    (selectChat)="onChatSelected($event.nickname, $event.image, $event.groupId)"
  ></app-group-chat-list>

  <ng-container chat-content>
    <ng-container *ngIf="selectedChat; else noChatSelected">
      <div class="flex flex-col h-full">
        <div class="flex-1 overflow-y-auto">
          <app-group-messages [groupId]="selectedGroupId" />
        </div>
        <shared-send-message-area
        (send)="sendMessage($event)"
        ></shared-send-message-area>
      </div>     
    </ng-container>
    <ng-template #noChatSelected></ng-template>
  </ng-container>
</app-chat-layout>

<app-group-info-modal
  [groupId]="selectedGroupId"
  [open]="groupInfoModalOpen"
  (close)="closeGroupInfoModal()"
  (groupUpdated)="onGroupUpdated()"
  (openChatWithUser)="onOpenChatWithUser($event)"
/>
